<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Projects - Jacob Horvitz</title>
    <link rel="stylesheet" href="projects.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.js"></script>
</head>

<body>
    <header>
        <nav>
            <ul>
                <li><a href="index.html">Home</a></li>
                <li><a href="about.html">About Me</a></li>
                <li><a href="social.html">Social Media</a></li>
                <li><a href="finance.html">Finance</a></li>
                <li><a href="projects.html">Projects</a></li>
                <li><a href="Law.html">Law</a></li>
            </ul>
        </nav>
    </header>

    <section class="content">
        <h2>Pacman Eating Ghosts</h2>
        <p>Jacob Horvitz</p>
        <p>Eat the ghosts to stay alive! will be adding key binds so you can play!</p>
        <div id="pacmanCanvas"></div>
    </section>

    <section class="content">
        <h2>Chat with AI</h2>
        <h3>this would be working if openAI didnt disable my API key! looking for fixes...</h3>
        <div id="chat-container">
            <div id="chat-display"></div>
            <input type="text" id="user-input" placeholder="Type your message...">
            <button onclick="sendMessage()">Send</button>
        </div>
    </section>

    <section class="content">
        <h2>Live Stock Data</h2>
        <div id="stock-ticker">Loading Stock Data...</div>
    </section>

    <footer>
        <p>&copy; 2024 Jacob Horvitz</p>
    </footer>

    <script>
        // Function to fetch stock data from Alpha Vantage API
        function getStockData() {
            var apiKey = "UOHYLUKQ7YG67YQ1"; // Replace with your Alpha Vantage API key
            var symbol = "AAPL"; // Change the symbol if necessary
            var apiUrl = `https://www.alphavantage.co/query?function=GLOBAL_QUOTE&symbol=${symbol}&apikey=${apiKey}`;

            fetch(apiUrl)
                .then(response => response.json())
                .then(data => {
                    var stockData = data["Global Quote"];
                    var symbol = stockData["01. symbol"];
                    var price = parseFloat(stockData["05. price"]);
                    var change = parseFloat(stockData["09. change"]);
                    var changePercent = parseFloat(stockData["10. change percent"]);
                    var direction = change > 0 ? "up" : "down";
                    var stockDate = stockData["07. latest trading day"];

                    document.getElementById("stock-ticker").innerHTML =
                        `<p>Date: ${stockDate}</p>
                         <p>Stock Symbol: ${symbol}</p>
                         <p>Price: $${price}</p>
                         <p>Change: $${change} (${changePercent}%) <span style="color: ${direction === "up" ? "green" : "red"}"> ${direction}</span></p>`;
                })
                .catch(error => console.error("Error fetching stock data:", error));
        }

        // Fetch stock data when the page loads
        window.addEventListener("load", getStockData);
        setInterval(getStockData, 6000);
    </script>
</body>

</html>
